<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/css/trends/details.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="/angular/commentsController.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <title><%= media.title %></title>
</head>
<body ng-controller="commentsController">
    <!-- Header -->
  
    <!-- Media Detail Container -->
    <div class="media-detail">
      <div class="media-image">
        <img src="<%= media.url %>" alt="<%= media.title %>">
      </div>
      <div class="media-content">
        <h1><%= media.title %></h1>
        <p class="media-description"><%= media.description %></p>
        
        <!-- Comment section -->
        <div>
          <!-- Check if the user is logged in to post a comment -->
          <div ng-if="isLoggedIn">
            <form ng-submit="addComment()">
              <textarea ng-model="newComment" placeholder="Add a comment..." required></textarea>
              <button class="btn btn-primary" type="submit">Post</button>
            </form>
          </div>
          <div ng-if="!isLoggedIn">
            <p>Please <a href="/auth/signin">log in</a> to post comments.</p>
          </div>
        
          <!-- Display the list of comments -->
          <div class="comments-section mt-4">
            <div class="comment mb-3" ng-repeat="comment in comments">
              <strong>User {{ comment.user_id }}:</strong>
              <p>{{ comment.content }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Link to Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
